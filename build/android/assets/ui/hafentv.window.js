var YT=require("ti.youtubeproxy"),swipeRefreshModule=require("com.rkam.swiperefreshlayout"),startYT=function(e){try{var t=Ti.Android.createIntent({action:Ti.Android.ACTION_VIEW,data:"vnd.youtube://"+e.row.itemId});t.putExtra("force_fullscreen",!0),t.putExtra("force_finishOnEnd",!0),Ti.Android.currentActivity.startActivity(t)}catch(i){Ti.Platform.openURL("http://search?q=youtube")}};module.exports=function(){function e(){t.swipeRefreshContainer.setRefreshing(!0),YT.getVideosByplaylistId({id:"PLOxAwds171bddg8MGOaoWKRctzXO6tMQK","default":require("model/ytchannel")}).then(function(e){t.swipeRefreshContainer.setRefreshing(!1),Ti.UI.createNotification({message:"Daten des YoutubeChannels „HafenTV“ erneuert."}).show();var i=e.map(require("ui/video.row"));t.list.setData(i)},function(){Ti.UI.createNotification({message:"Ohne Internet gibt es nur wenig aktuelle HafenTV-Videos"}).show(),t.swipeRefreshContainer.setRefreshing(!1)})}var t=Ti.UI.createWindow({backgroundColor:"#092B55"});return t.add(Ti.UI.createImageView({image:"/assets/pano.png",top:120,width:1840,height:700})),t.children[0].animate({left:-320,duration:1500}),t.list=Ti.UI.createTableView(),t.swipeRefreshContainer=swipeRefreshModule.createSwipeRefresh({view:t.list,height:Ti.UI.FILL,width:Ti.UI.FILL,top:125}),t.add(t.swipeRefreshContainer),t.swipeRefreshContainer.addEventListener("refreshing",e),t.addEventListener("focus",e),t.list.addEventListener("singletap",startYT),Ti.Gesture.addEventListener("orientationchange",function(){t.swipeRefreshContainer&&t.swipeRefreshContainer.setTop(Ti.Platform.displayCaps.platformHeight>Ti.Platform.displayCaps.platformWidth?120:70)}),t};