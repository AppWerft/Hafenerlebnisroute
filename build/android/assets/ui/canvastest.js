module.exports=function(){var e=Ti.UI.createWindow({backgroundColor:"gray"});e.open();var t=require("com.wwl.canvas"),n=Ti.UI.createLabel({font:{fontSize:28},color:"black",zIndex:2e3,left:50,top:50,text:"This text appear in front of the canvas"});e.add(n);var a=t.createCanvasView({backgroundColor:"transparent",right:20,bottom:80,top:20,left:20,zIndex:1});e.add(a);var r=[{name:"triangles",fn:function(){a.beginPath(),a.fillStyle="red",a.moveTo(25,25),a.lineTo(105,25),a.lineTo(25,105),a.fill(),a.beginPath(),a.moveTo(125,125),a.lineTo(125,45),a.lineTo(45,125),a.closePath(),a.stroke()}},{name:"filled rect",fn:function(){a.beginPath(),a.fillStyle="yellow",a.fillRect(10,200,75,75)}},{name:"circle",fn:function(){a.beginPath(),a.lineWidth=5,a.strokeStyle="red",a.drawCircle(150,150,50)}},{name:"line, point, round rect",fn:function(){a.beginPath(),a.lineWidth=7,a.strokeStyle="blue",a.drawLine(0,0,400,400),a.drawPoint(50,150),a.strokeStyle="black",a.drawRoundRect(240,200,300,300,10,10)}},{name:"semicircle",fn:function(){a.beginPath(),a.arc(288,75,360,125,90,180),a.closePath(),a.lineWidth=5,a.fillStyle="red",a.fill(),a.strokeStyle="#550000",a.stroke()}},{name:"rounded corners with arcTo",fn:function(){a.beginPath(),a.moveTo(20,20),a.lineTo(100,20),a.arcTo(120,20,200,70,0,90),a.lineTo(200,120),a.stroke()}},{name:"rectangle on path",fn:function(){a.beginPath(),a.addRect(188,50,200,100),a.fillStyle="yellow",a.fill(),a.lineWidth=7,a.strokeStyle="black",a.stroke()}},{name:"another example: filled and cloud",fn:function(){a.beginPath(),a.fillStyle="red",a.antiAlias=!0,a.moveTo(10,30),a.bezierCurveTo(50,90,159,-30,200,30),a.lineTo(200,90),a.lineTo(10,90),a.closePath(),a.fill(),a.lineWidth=4,a.strokeStyle="black",a.stroke(),a.beginPath(),a.antiAlias=!0,a.moveTo(170,80),a.To(130,100,130,150,230,150),a.bezierCurveTo(250,180,320,180,340,150),a.bezierCurveTo(420,150,420,120,390,100),a.bezierCurveTo(430,40,370,30,340,50),a.bezierCurveTo(320,5,250,20,250,50),a.bezierCurveTo(200,5,150,20,170,80),a.closePath(),a.lineWidth=15,a.fillStyle="#8ED6FF",a.fill(),a.strokeStyle="blue",a.stroke()}},{name:"face",fn:function(){a.beginPath(),a.lineWidth=4,a.strokeStyle="black",a.arc(75,75,175,175,0,360),a.arc(100,120,145,165,90,180),a.arc(100,100,115,115,0,360),a.arc(140,100,155,115,0,360),a.stroke()}},{name:"lineJoin",fn:function(){var e=["round","bevel","miter"];a.lineWidth=10,a.strokeStyle="black",a.clearShadow();for(var t=0;t<e.length;t++)a.beginPath(),a.lineJoin=e[t],a.moveTo(-5,5+40*t),a.lineTo(35,45+40*t),a.lineTo(75,5+40*t),a.lineTo(115,45+40*t),a.lineTo(155,5+40*t),a.stroke()}},{name:"lineCap",fn:function(){var e=["butt","round","square"];a.lineWidth=15,a.strokeStyle="black";for(var t=0;t<e.length;t++)a.beginPath(),a.lineCap=e[t],a.moveTo(25+50*t,10),a.lineTo(25+50*t,140),a.stroke()}},{name:"miterLimit",fn:function(){a.beginPath(),a.lineWidth=10,a.lineJoin="miter",a.miterLimit=5,a.moveTo(20,20),a.lineTo(50,27),a.lineTo(20,34),a.stroke()}},{name:"bezier curve",fn:function(){a.beginPath(),a.moveTo(75,40),a.bezierCurveTo(75,37,70,25,50,25),a.bezierCurveTo(20,25,20,62.5,20,62.5),a.bezierCurveTo(20,80,40,102,75,120),a.bezierCurveTo(110,102,130,80,130,62.5),a.bezierCurveTo(130,62.5,130,25,100,25),a.bezierCurveTo(85,25,75,37,75,40),a.lineWidth=5,a.strokeStyle="blue",a.fill()}},{name:"quadratic curve",fn:function(){a.beginPath(),a.moveTo(75,25),a.quadraticCurveTo(25,25,25,62.5),a.quadraticCurveTo(25,100,50,100),a.quadraticCurveTo(50,120,30,125),a.quadraticCurveTo(60,120,65,100),a.quadraticCurveTo(125,100,125,62.5),a.quadraticCurveTo(125,25,75,25),a.lineWidth=5,a.strokeStyle="blue",a.stroke()}},{name:"bezier and quadratic",fn:function(){a.beginPath(),a.moveTo(100,20),a.lineTo(200,160),a.quadraticCurveTo(230,200,250,120),a.bezierCurveTo(290,-40,300,200,400,150),a.lineTo(500,90),a.lineWidth=5,a.strokeStyle="blue",a.stroke()}},{name:"globalalpha",fn:function(){for(a.beginPath(),a.fillStyle="#FD0",a.fillRect(0,0,75,75),a.fillStyle="#6C0",a.fillRect(75,0,75,75),a.fillStyle="#09F",a.fillRect(0,75,75,75),a.fillStyle="#F30",a.fillRect(75,75,150,150),a.fillStyle="#FFF",a.globalAlpha=.2,i=0;7>i;i++)a.beginPath(),a.arc(75,75,85+20*i,85+20*i,0,360),a.fill()}},{name:"shadow",fn:function(){a.beginPath(),a.addRect(188,40,200,100),a.fillStyle="red",a.shadowColor="#999",a.shadowBlur=20,a.shadowOffsetX=15,a.shadowOffsetY=15,a.fill()}},{name:"clipping",fn:function(){a.save(),a.fillStyle="red",a.fillRect(0,0,400,200),a.beginPath(),a.moveTo(200,50),a.lineTo(250,150),a.lineTo(150,150),a.closePath(),a.clip(),a.fillStyle="yellow",a.fillRect(0,0,400,100),a.restore()}},{name:"draw image",fn:function(){var e=Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,"images","flower.jpg");a.drawImage(e.nativePath,50,50,200,200)}},{name:"text",fn:function(){a.textSize=40,a.textAlign="left",a.lineWidth=1,a.textStyle="italic",a.underlineText=!0,a.typeface="sans-serif-light",a.strokeStyle="blue",a.drawText("Hello World!",75,125)}},{name:"draw text on path",fn:function(){a.beginPath(),a.arc(88,75,470,150,90,180),a.textSize=40,a.textAlign="left",a.lineWidth=1,a.strokeStyle="purple",a.drawTextOnPath("Text on a path!",10,1)}},{name:"fill text on path",fn:function(){a.beginPath(),a.arc(188,175,470,275,270,-180),a.textSize=40,a.textAlign="left",a.lineWidth=1,a.strokeStyle="purple",a.fillTextOnPath("Text on a path!",25,1)}},{name:"rotate",fn:function(){a.rotate(60),a.fillStyle="black",a.fillRect(50,20,100,50)}},{name:"scale",fn:function(){a.strokeStyle="black",a.strokeRect(5,5,25,15),a.scale(2,2),a.strokeRect(5,5,25,15)}},{name:"translate",fn:function(){a.fillStyle="black",a.fillRect(10,10,100,50),a.translate(70,70),a.fillRect(10,10,100,50)}},{name:"hide",fn:function(){a.hide()}},{name:"show",fn:function(){a.show()}}];a.addEventListener("load",function(){var t=Ti.UI.createButton({left:20,bottom:0,title:"Clear",zIndex:1e3});e.add(t),t.addEventListener("click",function(e){e.cancelBubble=!0,a.clear()});var i=Ti.UI.createPicker({right:160,bottom:30,zIndex:1e3}),n=[];r.forEach(function(e,t){n.push(Ti.UI.createPickerRow({index:t,title:e.name}))}),i.add(n),i.selectionIndicator=!0,e.add(i);var l=Ti.UI.createButton({right:20,bottom:0,title:"Perform",zIndex:1e3});l.addEventListener("click",function(){var e=i.getSelectedRow(0),t=e.index;r[t].fn()}),e.add(l)}),a.addEventListener("click",function(){var t=Ti.UI.create2DMatrix();t=t.rotate(180),t=t.scale(2,2);var i=Ti.UI.createAnimation({transform:t,duration:2e3,autoreverse:!0,repeat:3});a.animate(i),i.addEventListener("complete",function(){var t=a.toImage(),i=Ti.UI.createImageView({width:250,height:350,bottom:5,right:5,image:t,zIndex:2});e.add(i)})})};